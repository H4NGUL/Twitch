<div class="row">
<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">
  <div class="widget">
    <div class="title">
      Links
      <input id="moderationLinksToggle" type="checkbox" data-size="mini" data-onstyle="success" data-offstyle="danger">
    </div>
    <table class="table table-striped">
      <tr>
        <td><strong>Timeout duration</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationLinksTimeout" onclick="commons.configEditable(this, 's')" id="moderationLinksTimeout"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationLinksTimeout_group">
            <div class="input-group-addon">seconds</div>
            <input style="width: 6em" id="input_moderationLinksTimeout" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
    </table>
  </div>
</div>

<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">
  <div class="widget">
    <div class="title">
      Symbols
      <input id="moderationSymbolsToggle" type="checkbox" data-toggle="toggle"  data-size="mini" data-onstyle="success" data-offstyle="danger">
    </div>
    <table class="table table-striped">
      <tr>
        <td><strong>Timeout duration</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationSymbolsTimeout" onclick="commons.configEditable(this, 's')" id="moderationSymbolsTimeout"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationSymbolsTimeout_group">
            <div class="input-group-addon">seconds</div>
            <input style="width: 6em" id="input_moderationSymbolsTimeout" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
      <tr>
        <td><strong>Trigger length of message</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationSymbolsTriggerLength" onclick="commons.configEditable(this, '')" id="moderationSymbolsTriggerLength"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationSymbolsTriggerLength_group">
            <input style="width: 6em" id="input_moderationSymbolsTriggerLength" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
      <tr>
        <td><strong>Max symbols consecutively</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationSymbolsMaxConsecutively" onclick="commons.configEditable(this, '')" id="moderationSymbolsMaxConsecutively"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationSymbolsMaxConsecutively_group">
            <input style="width: 6em" id="input_moderationSymbolsMaxConsecutively" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
      <tr>
        <td><strong>Max symbols percentage</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationSymbolsMaxPercent" onclick="commons.configEditable(this, '%')" id="moderationSymbolsMaxPercent"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationSymbolsMaxPercent_group">
            <div class="input-group-addon">%</div>
            <input style="width: 6em" id="input_moderationSymbolsMaxPercent" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
    </table>
  </div>
</div>

<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">
  <div class="widget">
    <div class="title">
      Long Messages
      <input id="moderationLongMessageToggle" type="checkbox" data-toggle="toggle"  data-size="mini" data-onstyle="success" data-offstyle="danger">
    </div>
    <table class="table table-striped">
      <tr>
        <td><strong>Timeout duration</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationLongMessageTimeout" onclick="commons.configEditable(this, 's')" id="moderationLongMessageTimeout"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationLongMessageTimeout_group">
            <div class="input-group-addon">seconds</div>
            <input style="width: 6em" id="input_moderationLongMessageTimeout" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
      <tr>
        <td><strong>Trigger length of message</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationLongMessageTriggerLength" onclick="commons.configEditable(this, '')" id="moderationLongMessageTriggerLength"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationLongMessageTriggerLength_group">
            <input style="width: 6em" id="input_moderationLongMessageTriggerLength" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>

<div class="row">
<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">
  <div class="widget">
    <div class="title">
      Capitals
      <input id="moderationCapsToggle" type="checkbox" data-toggle="toggle"  data-size="mini" data-onstyle="success" data-offstyle="danger">
    </div>
    <table class="table table-striped">
      <tr>
        <td><strong>Timeout duration</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationCapsTimeout" onclick="commons.configEditable(this, 's')" id="moderationCapsTimeout"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationCapsTimeout_group">
            <div class="input-group-addon">seconds</div>
            <input style="width: 6em" id="input_moderationCapsTimeout" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
      <tr>
        <td><strong>Trigger length of message</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationCapsTriggerLength" onclick="commons.configEditable(this, '')" id="moderationCapsTriggerLength"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationCapsTriggerLength_group">
            <input style="width: 6em" id="input_moderationCapsTriggerLength" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
      <tr>
        <td><strong>Max symbols percentage</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationCapsMaxPercent" onclick="commons.configEditable(this, '%')" id="moderationCapsMaxPercent"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationCapsMaxPercent_group">
            <div class="input-group-addon">%</div>
            <input style="width: 6em" id="input_moderationCapsMaxPercent" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
    </table>
  </div>
</div>

<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">
  <div class="widget">
    <div class="title">
      Spam
      <input id="moderationSpamToggle" type="checkbox" data-toggle="toggle"  data-size="mini" data-onstyle="success" data-offstyle="danger">
    </div>
    <table class="table table-striped">
      <tr>
        <td><strong>Timeout duration</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationSpamTimeout" onclick="commons.configEditable(this, 's')" id="moderationSpamTimeout"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationSpamTimeout_group">
            <div class="input-group-addon">seconds</div>
            <input style="width: 6em" id="input_moderationSpamTimeout" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
      <tr>
        <td><strong>Trigger length of message</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationSpamTriggerLength" onclick="commons.configEditable(this, '')" id="moderationSpamTriggerLength"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationSpamTriggerLength_group">
            <input style="width: 6em" id="input_moderationSpamTriggerLength" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
      <tr>
        <td><strong>Max spam length</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationSpamMaxLength" onclick="commons.configEditable(this, '')" id="moderationSpamMaxLength"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationSpamMaxLength_group">
            <input style="width: 6em" id="input_moderationSpamMaxLength" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
    </table>
  </div>
</div>
<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">
  <div class="widget">
    <div class="title">
      Colors
      <input id="moderationColorToggle" type="checkbox" data-toggle="toggle"  data-size="mini" data-onstyle="success" data-offstyle="danger">
    </div>
    <table class="table table-striped">
      <tr>
        <td><strong>Timeout duration</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationColorTimeout" onclick="commons.configEditable(this, 's')" id="moderationColorTimeout"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationColorTimeout_group">
            <div class="input-group-addon">seconds</div>
            <input style="width: 6em" id="input_moderationColorTimeout" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>

<div class="row">
<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">
  <div class="widget">
    <div class="title">
      Emotes
      <input id="moderationEmotesToggle" type="checkbox" data-toggle="toggle"  data-size="mini" data-onstyle="success" data-offstyle="danger">
    </div>
    <table class="table table-striped">
      <tr>
        <td><strong>Timeout duration</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationEmotesTimeout" onclick="commons.configEditable(this, 's')" id="moderationEmotesTimeout"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationEmotesTimeout_group">
            <div class="input-group-addon">seconds</div>
            <input style="width: 6em" id="input_moderationEmotesTimeout" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
      <tr>
        <td><strong>Max emotes in message</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationEmotesMaxCount" onclick="commons.configEditable(this, '')" id="moderationEmotesMaxCount"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationEmotesMaxCount_group">
            <input style="width: 6em" id="input_moderationEmotesMaxCount" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
    </table>
  </div>
</div>
<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">
  <div class="widget">
    <div class="title">Warnings before timeout</div>
    <table class="table table-striped">
      <tr>
        <td><strong>Warnings before user timeout</strong></td>
        <td>
          <abbr title="click to edit" data-config-id="moderationWarnings" onclick="commons.configEditable(this, '')" id="moderationWarnings"></abbr>
          <div class="input-group" style="display:none;" id="input_moderationWarnings_group">
            <input style="width: 6em" id="input_moderationWarnings" class="form-control input-sm" type="text"/>
          </div>
        </td>
      </tr>
      <tr>
        <td><strong>Warning should be timeout</strong></td>
        <td>
          <input id="moderationWarningsTimeoutsToggle" type="checkbox" data-toggle="toggle"  data-size="mini" data-onstyle="success" data-offstyle="danger">
        </td>
      </tr>
    </table>
  </div>
</div>
</div>

<script>
  socket.emit('getModerationConfiguration')

  var createToggle = function (id, value, options) {
    options = options || {on: 'On', off: 'Off'}
    $('#' + id + 'Toggle').bootstrapToggle(options)
    $('#' + id + 'Toggle').bootstrapToggle(value ? 'on' : 'off')
    $('#' + id + 'Toggle').off('change')
    $('#' + id + 'Toggle').change(function() {
      var data = {}
      data[id] = $(this).prop('checked')
      if ($('#' + id + 'Toggle').data('init')) socket.emit('saveConfiguration', data)
    })
    $('#' + id + 'Toggle').data('init', true)
  }

  socket.off('moderationConfiguration')
  socket.on('moderationConfiguration', function(data) {
    createToggle('moderationLinks', data.moderationLinks)
    $("#moderationLinksTimeout").text(data.moderationLinksTimeout + 's')

    createToggle('moderationSymbols', data.moderationSymbols)
    $("#moderationSymbolsTimeout").text(data.moderationSymbolsTimeout + 's')
    $("#moderationSymbolsTriggerLength").text(data.moderationSymbolsTriggerLength)
    $("#moderationSymbolsMaxConsecutively").text(data.moderationSymbolsMaxConsecutively)
    $("#moderationSymbolsMaxPercent").text(data.moderationSymbolsMaxPercent + '%')

    createToggle('moderationLongMessage', data.moderationLongMessage)
    $("#moderationLongMessageTimeout").text(data.moderationLongMessageTimeout + 's')
    $("#moderationLongMessageTriggerLength").text(data.moderationLongMessageTriggerLength)

    createToggle('moderationCaps', data.moderationCaps)
    $("#moderationCapsTimeout").text(data.moderationCapsTimeout + 's')
    $("#moderationCapsTriggerLength").text(data.moderationCapsTriggerLength)
    $("#moderationCapsMaxPercent").text(data.moderationCapsMaxPercent + '%')

    createToggle('moderationSpam', data.moderationSpam)
    $("#moderationSpamTimeout").text(data.moderationSpamTimeout + 's')
    $("#moderationSpamTriggerLength").text(data.moderationSpamTriggerLength)
    $("#moderationSpamMaxLength").text(data.moderationSpamMaxLength)

    createToggle('moderationColor', data.moderationColor)
    $("#moderationColorTimeout").text(data.moderationColorTimeout + 's')

    createToggle('moderationEmotes', data.moderationEmotes)
    $("#moderationEmotesTimeout").text(data.moderationEmotesTimeout + 's')
    $("#moderationEmotesMaxCount").text(data.moderationEmotesMaxCount)

    $("#moderationWarnings").text(data.moderationWarnings)
    createToggle('moderationWarningsTimeouts', data.moderationWarningsTimeouts, {on: 'timeout', off: 'warning'})
  })
</script>